<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:rich="http://richfaces.org/rich"
	  xmlns:a4j="http://richfaces.org/a4j">

<ui:composition>
	<h:panelGrid columns="2">
		<h:outputLabel value="#{bundle['_nls.chargeback.data_mes.label']}: " styleClass="labelRigthAlign"/>
		<h:outputText value="#{chargebackController.bean.installmentDate}">
			<f:convertDateTime pattern="MMM/yyyy" />
		</h:outputText>
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.resource_type.label']}: " styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.indicadorTipoAlocacao}"
					  converter="TipoTiRecursoConverter"/>
		<rich:spacer height="2"/>
		<rich:spacer height="2"/>

		<h:outputLabel value="#{bundle['_nls.chargeback.invoice_number.label']}: " styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.codigoFatura}"/>
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel id="contractLobListLabel" value="#{bundle['_nls.chargeback.project.label']}: " styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.clobNamesReadOnly}"/>
		<rich:spacer height="5" />
		<rich:spacer height="5" />

		<h:outputLabel value="#{bundle['_nls.chargeback.license_ID.label']}: " styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.licenseID}"/>
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.resource_name.label']}: " styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.resourceName}" />
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.branch.label']}: " styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.empresa.nomeEmpresa}"/>
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.installments_amount.label']}:"
					  required="true" immediate="true" styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.parcelasLicenca}" />
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.installments_number.label']}:"
					  required="true" immediate="true" styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.installmentNumber}" />
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.provider.label']}: " styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.nomeFornecedor}" />
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.ti_recurso.label']}: " styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.nomeTiRecurso}"/>
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.total_amount.label']}:" styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.valorLicenca}">
			<rich:jQuery selector="#valorLicenca"
						 query="setMask('#{bundle['jquery.monetary.pattern']}')"
						 timing="onload" />
			<f:convertNumber locale="#{bundle['locale.en_us']}"
							 pattern="#{systemProperties['pattern.number']}" />
		</h:outputText>
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.deal.moeda.label']}: " styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.nomeMoeda}" />
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.installments_amount.label']}" styleClass="labelRigthAlign" escape="false"/>
		<br/>
		<h:outputLabel value="(value): " styleClass="labelRigthAlign"/>
		<h:outputText value="#{chargebackController.bean.valorParcela}" >
			<rich:jQuery selector="#valorLicenca"
						 query="setMask('#{bundle['jquery.monetary.pattern']}')"
						 timing="onload" />
			<f:convertNumber locale="#{bundle['locale.en_us']}"
							 pattern="#{systemProperties['pattern.number']}" />
		</h:outputText>
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.start_date.label']}:"
					  required="true" immediate="true" styleClass="labelRigthAlign"/>
		<h:outputText value="#{chargebackController.bean.startDate}">
			<f:convertDateTime pattern="MMM/yyyy" />
		</h:outputText>
		<rich:spacer height="2" />
		<rich:spacer height="2" />

		<h:outputLabel value="#{bundle['_nls.chargeback.login.label']}:"
					  required="true" immediate="true" styleClass="labelRigthAlign" />
		<h:outputText value="#{chargebackController.bean.installmentLogins}" />
		<rich:spacer height="2" />
		<rich:spacer height="2" />

	</h:panelGrid>

	<h:panelGroup columns="1" >
		<rich:spacer height="20" />
		<fieldset>
			<legend>
				<h:outputText value="#{bundle['_nls.chargeback.change_installment.legend']}"
							  styleClass="labelGeneric" />
			</legend>
			<h:outputText value="#{bundle['_nls.chback_pess.msg.alert_installments']}"
						  style="display: inline-block; height: 16px; line-height: 16px;" styleClass="msgWarng" />
			<rich:spacer height="10" />

			<h:panelGrid columns="2" cellpadding="0" cellspacing="0">
				<h:outputText value="Type:"
							  for="tipoAlocacaoChangeInstallment" styleClass="labelGeneric" />
				<a4j:region>
					<rich:comboBox id="tipoAlocacaoChangeInstallment" enableManualInput="false"
								   label="#{bundle['_nls.ti_recurso.tipo_alocacao.label']}"
								   value="#{chargebackController.bean.indicadorTipoLicenca}"
								   directInputSuggestions="true" converter="TipoLicencaConverter"
								   immediate="true" valueChangeListener="#{chargebackController.prepareTipoLicenca}"
								   defaultLabel="#{bundle['_nls.comboBox.default.label']}" >

						<f:selectItem itemValue="INTERNAL" />
						<f:selectItem itemValue="PRODUCTION" />

						<a4j:support event="onselect" reRender="msaComboChangeInstallment,contractLobListChangeInstallment"
									 limitToList="true" />
					</rich:comboBox>
				</a4j:region>

				<h:outputText value="#{bundle['_nls.comissao_acelerador.cliente.label']}:"
							  for="msaComboChangeInstallment" styleClass="labelGeneric" />
				<a4j:region>
					<rich:comboBox id="msaComboChangeInstallment" disabled="#{chargebackController.bean.indicadorTipoLicenca != 'PRODUCTION'}"
								   label="#{bundle['_nls.fatura.msa.label']}"
								   value="#{chargebackController.bean.nomeMsa}"
								   suggestionValues="#{chargebackController.bean.msaList}"
								   directInputSuggestions="true" immediate="true"
								   valueChangeListener="#{chargebackController.prepareContratoPraticaCombo}"
								   tabindex="4">
						<a4j:support event="onselect" reRender="contractLobListChangeInstallment"
									 limitToList="true" />
					</rich:comboBox>
				</a4j:region>

				<h:outputText value="#{bundle['_nls.chargeback.clob_costcenter.label']}*:"
							  for="contractLobListChangeInstallment" styleClass="labelGeneric" />
				<h:selectManyListbox
						id="contractLobListChangeInstallment"
						immediate="true"
						value="#{chargebackController.bean.contratoPraticaCodigosSelected}"
						size="10"
						label="C-LOB / Cost Center">

					<f:selectItems
							value="#{chargebackController.bean.contratoPraticas}" />
				</h:selectManyListbox>
			</h:panelGrid>
		</fieldset>
	</h:panelGroup>

	<rich:panel>
		<h:form styleClass="noMargin">
			<h:panelGrid columns="2">
				<a4j:region renderRegionOnly="true" id="region">
					<h:outputText
							value="#{bundle['_nls.travel.budget.label.login']}: "
							styleClass="labelGeneric" />

					<h:inputText
							value="#{chargebackController.bean.login}"
							id="codigoMnemonico"
							validator="#{chargebackController.validateRecursoPessoa}"
							required="false" style=" width : 150px;"
							label="#{bundle['_nls.travel.budget.label.login']}">
						<rich:suggestionbox for="codigoMnemonico" var="result"
											suggestionAction="#{chargebackController.autoCompleteRecurso}">
							<h:column>
								<h:outputText value="#{result.codigoMnemonico}" />
							</h:column>
						</rich:suggestionbox>
					</h:inputText>

				</a4j:region>

				<a4j:commandButton
						action="#{chargebackController.addPersonLicencaSwProjeto}"
						value="#{bundle['_nls.travel.budget.button.add']}"
						styleClass="buttonGeneric" reRender="lista" />

			</h:panelGrid>


		</h:form>

		<rich:spacer height="5"/>

		<h:form>
			<rich:dataTable
					value="#{chargebackController.bean.logins}"
					var="item" width="100%" id="lista">
				<rich:column style="width:400px;">
					<f:facet name="header">
						<h:outputText
								value="#{bundle['_nls.travel.budget.white_list.label.login']}" />
					</f:facet>
					<h:outputText value="#{item}" />
				</rich:column>

				<rich:column style="text-align: center;">
					<f:facet name="header">
						<h:outputText
								value="#{bundle['_nls.travel.budget.label.actions']}" />
					</f:facet>
					<!-- Botao de delete -->
					<a4j:commandLink ajaxSingle="true" id="deleteLink"
									 oncomplete="#{rich:component('deletePerson')}.show()">
						<h:graphicImage value="/images/icons/delete.gif" style="border:0" />
						<f:setPropertyActionListener value="#{item}"
													 target="#{chargebackController.bean.login}" />
					</a4j:commandLink>
					<rich:toolTip for="deleteLink"
								  value="#{bundle['_nls.hint.delete']}" />


				</rich:column>

				<f:facet name="footer">
					<h:outputText value="Logins without added"
								  rendered="#{empty chargebackController.bean.logins}"
								  style="font-style: italic;" />
				</f:facet>

			</rich:dataTable>

		</h:form>
	</rich:panel>

	<!-- Modal do delete -->
	<rich:modalPanel id="deletePerson" autosized="true" width="200">
		<f:facet name="header">
			<h:outputText value="#{bundle['_nls.title.confirmation']}"
						  style="padding-right:15px;" />
		</f:facet>
		<f:facet name="controls">
			<h:panelGroup>
				<h:graphicImage value="/images/icons/close.gif"
								styleClass="hidelink" id="hidelinkDeletePerson" />
				<rich:componentControl for="deletePerson"
									   attachTo="hidelinkDeletePerson" operation="hide" event="onclick" />
			</h:panelGroup>
		</f:facet>

		<h:outputText
				value="#{bundle['_nls.travel.budget.msgm.delete.person']}"
				style="padding-right:15px;" />

		<h:form>
			<rich:spacer height="5" />
			<table width="100%">
				<tbody>
				<tr>
					<td align="center" width="50%"><a4j:commandButton
							value="#{bundle['_nls.button.ok']}" ajaxSingle="true"
							action="#{chargebackController.removePersonLicencaSwProjeto}"
							oncomplete="#{rich:component('deletePerson')}.hide();"
							styleClass="buttonGeneric" /></td>
					<td align="center" width="50%"><a4j:commandButton
							value="#{bundle['_nls.button.cancel']}"
							styleClass="buttonGeneric"
							oncomplete="#{rich:component('deletePerson')}.hide();return false;" />
					</td>
				</tr>
				</tbody>
			</table>
		</h:form>
	</rich:modalPanel>



	<rich:spacer height="10" />
</ui:composition>

</html>