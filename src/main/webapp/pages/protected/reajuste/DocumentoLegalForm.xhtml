<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:rich="http://richfaces.org/rich"
	  xmlns:a4j="http://richfaces.org/a4j"
	  xmlns:sec="http://www.springframework.org/security/facelets/tags">

<ui:composition>
	<h:panelGrid class="align-top" style="vertical-align:top" id="msa-contrato-form">
		<h:panelGrid>

			<h:outputText value="#{bundle['_nls.msa.documento_legal.codigo.label']}*:" for="project-code" styleClass="labelGeneric"  />
			<h:outputText value="#{msaController.msaContratoBean.to.codigo}" rendered="#{(msaController.msaContratoBean.to.codigo > 0)}" id="project-code"  styleClass="labelGeneric"  />

			<h:outputText value="#{bundle['_nls.msa.documento_legal.project_description.label']}*:" for="project-description" styleClass="labelGeneric" />
			<h:inputText validator="#{xssValidator.validate}"
						 id="project-description"
						 size="110"
						 maxlength="200"
						 label="#{bundle['_nls.msa.documento_legal.project_description.label']}"
						 value="#{msaController.msaContratoBean.to.descricao}"
			             disabled="#{msaController.msaContratoBean.isITSupport}">
			</h:inputText>
		</h:panelGrid>
		<style>
			.table {
				border-color: #BED6F8;
				border-style: solid;
				border-width: thin;
				margin-left: 3px;
			}

			.columnheader{
				font: bold 20px ;
				color: red;
			}

			.footer{
				text-align: center;
			}

			.alignTop {
				vertical-align: top !important;;
			}
		</style>
		<h:panelGrid columns="5" columnClasses="alignTop,alignTop,alignTop,alignTop,alignTop">

			<h:panelGrid>
				<h:outputText value="#{bundle['_nls.msa.documento_legal.jira_cp.label']}*:" for="jira-cp" styleClass="labelGeneric" />
				<h:inputText validator="#{xssValidator.validate}"
							 id="jira-cp"
							 size="20"
							 maxlength="10"
							 label="#{bundle['_nls.msa.documento_legal.jira_cp.label']}"
							 value="#{msaController.msaContratoBean.to.jiraCp}"
							 disabled="#{msaController.msaContratoBean.isITSupport}">
				</h:inputText>

				<h:outputText value="#{bundle['_nls.msa.documento_legal.jira_legal.label']}:" for="jira-legal" styleClass="labelGeneric" />
				<h:inputText id="jira-legal"
							 size="20"
							 maxlength="10"
							 label="#{bundle['_nls.msa.documento_legal.jira_legal.label']}"
							 value="#{msaController.msaContratoBean.to.jiraLegal}"
							 disabled="#{msaController.msaContratoBean.isITSupport}">
				</h:inputText>

				<h:outputText value="#{bundle['_nls.msa.documento_legal.sow.label']}:" for="sow" styleClass="labelGeneric" />
				<h:inputText id="sow"
							 size="20"
							 maxlength="20"
							 label="#{bundle['_nls.msa.documento_legal.sow.label']}"
							 value="#{msaController.msaContratoBean.to.sow}"
							 disabled="#{msaController.msaContratoBean.isITSupport}">
				</h:inputText>

				<h:outputText value="#{bundle['_nls.msa.documento_legal.po.label']}:" for="po" styleClass="labelGeneric" />
				<h:inputTextarea id="po"
								 row="10"
								 col="100"
								 maxlength="100"
								 label="PO"
								 style="width: 145px"
								 value="#{msaController.msaContratoBean.to.po}"
								 disabled="#{msaController.msaContratoBean.isITSupport}">
					<f:validateLength minimum="1" maximum="100" />
				</h:inputTextarea>

				<rich:spacer height="5" />

				<h:outputText value="#{bundle['_nls.msa.documento_legal.tipo.label']}*:" for="tipo" styleClass="labelGeneric" />
				<rich:comboBox id="tipo"
							   label="#{bundle['_nls.msa.documento_legal.tipo.label']}"
							   suggestionValues="#{msaController.msaContratoBean.tipoContratoComboList}"
							   value="#{msaController.msaContratoBean.tipoContratoSelected}"
							   defaultLabel="#{empty msaController.msaContratoBean.tipoContratoComboList ? bundle['_nls.msa.documento_legal.msg.warning.no_type'] : bundle['_nls.msa.documento_legal.tipo.combo.label']}"
							   enableManualInput="false"
							   disabled="#{msaController.msaContratoBean.isITSupport}">
				</rich:comboBox>

				<rich:spacer height="5" />

				<h:outputText value="#{bundle['_nls_msa.documento_legal.month_of_readjustment.label']}*:" for="month" styleClass="labelGeneric" />
				<rich:comboBox id="month"
							   label="#{bundle['_nls_msa.documento_legal.month_of_readjustment.label']}"
							   suggestionValues="#{msaController.msaContratoBean.monthsList}"
							   value="#{msaController.msaContratoBean.monthSelected}"
							   defaultLabel="#{bundle['_nls.encargo.mes.label']}"
							   enableManualInput="false"
							   disabled="#{msaController.msaContratoBean.isITSupport}">
				</rich:comboBox>

				<rich:spacer height="5" />

				<h:outputText value="#{bundle['_nls.msa.documento_legal.currency.label']}*:" for="currency" styleClass="labelGeneric" />
				<rich:comboBox id="currency"
							   label="#{bundle['_nls.msa.documento_legal.currency.label']}"
							   suggestionValues="#{msaController.bean.moedaList}"
							   value="#{msaController.msaContratoBean.moedaSelected}"
							   defaultLabel="#{empty msaController.bean.moedaList ? bundle['_nls.perfil_vendido.msg.warning.no_currency'] : bundle['_nls.moeda.entity_name']}"
							   enableManualInput="false"
							   disabled="#{msaController.msaContratoBean.isITSupport}">
				</rich:comboBox>

			</h:panelGrid>

			<h:panelGrid>
				<h:outputText value="#{bundle['_nls.msa.documento_legal.fte.label']}*:" for="fte" styleClass="labelGeneric" />
				<h:selectOneRadio id="fte"
								  styleClass="no-margin"
								  label="#{bundle['_nls.msa.documento_legal.fte.label']}"
								  value="#{msaController.msaContratoBean.to.fte}"
								  unselectable="true"
								  columns="2"
								  disabled="#{msaController.msaContratoBean.isITSupport}">
					<f:selectItem itemValue="true" itemLabel="#{bundle['_nls.yes.label']}" />
					<f:selectItem itemValue="false" itemLabel="#{bundle['_nls.no.label']}" />
					<a4j:support event="onchange" limitToList="true"
								 reRender="msa-contrato-form" action="#{msaController.clearValues}" />
				</h:selectOneRadio>

				<h:outputText value="#{bundle['_nls.msa.documento_legal.haslimit.label']}*:" rendered="#{msaController.msaContratoBean.to.fte}" for="limit" styleClass="labelGeneric" />
				<h:selectOneRadio id="limit"
								  styleClass="no-margin"
								  rendered="#{msaController.msaContratoBean.to.fte}"
								  label="#{bundle['_nls.msa.documento_legal.haslimit.label']}"
								  value="#{msaController.msaContratoBean.to.hasLimit}"
								  unselectable="true"
								  columns="2"
								  disabled="#{msaController.msaContratoBean.isITSupport}">
					<f:selectItem itemValue="true" itemLabel="#{bundle['_nls.yes.label']}" />
					<f:selectItem itemValue="false" itemLabel="#{bundle['_nls.no.label']}" />
					<a4j:support event="onchange" limitToList="true"
								 reRender="msa-contrato-form" action="#{msaController.clearValues}" />
				</h:selectOneRadio>

				<h:outputText value="#{bundle['_nls.msa.documento_legal.total_contract_amount.label']}*:" for="total-contract-amount" styleClass="labelGeneric" />
				<h:inputText id="total-contract-amount"
							 size="20"
							 maxlength="18"
							 disabled="#{msaController.msaContratoBean.isITSupport or msaController.msaContratoBean.disableTotalContract}"
							 label="#{bundle['_nls.msa.documento_legal.total_contract_amount.label']}"
							 value="#{msaController.msaContratoBean.to.totalContrato}">

					<a4j:support event="onchange" limitToList="true"
								 reRender="total-contract-amount" />
					<rich:jQuery selector="#total-contract-amount" timing="onload"
								 query="setMask('#{bundle['jquery.monetary.pattern']}')" />
					<f:convertNumber locale="#{bundle['locale.en_us']}"
									 pattern="#{systemProperties['pattern.number']}" />
				</h:inputText>

				<h:outputText value="#{bundle['_nls.msa.documento_legal.type_amount_expenses.label']}*:" for="type-amount-expenses" styleClass="labelGeneric" />
				<rich:comboBox id="type-amount-expenses"
							   label="#{bundle['_nls.msa.documento_legal.type_amount_expenses.label']}"
							   suggestionValues="#{msaController.msaContratoBean.tipoMontanteDespesaList}"
							   value="#{msaController.msaContratoBean.tipoMontanteDespesaSelected}"
							   defaultLabel="#{empty msaController.msaContratoBean.tipoMontanteDespesaList ? bundle['_nls.msa.documento_legal.msg.warning.no_type'] : bundle['_nls.msa.documento_legal.type_amount_expenses.label']}"
							   enableManualInput="false"
							   disabled="#{msaController.msaContratoBean.isITSupport}">
					<a4j:support event="onselect" limitToList="true" action="#{msaController.clearValues}"
								 reRender="msa-contrato-form" />
				</rich:comboBox>

				<h:outputText value="#{bundle['_nls.msa.documento_legal.total_amount_expenses.label']}*:"
							  for="total-amount-expenses" styleClass="labelGeneric"
							  rendered="#{msaController.msaContratoBean.tipoMontanteDespesaIsValue}" />
				<h:inputText id="total-amount-expenses"
							 size="50"
							 maxlength="18"
							 label="#{bundle['_nls.msa.documento_legal.total_amount_expenses.label']}"
							 value="#{msaController.msaContratoBean.to.valorDespesa}"
							 rendered="#{msaController.msaContratoBean.tipoMontanteDespesaIsValue}"
							 disabled="#{msaController.msaContratoBean.isITSupport}">
					<a4j:support event="onchange" limitToList="true"
								 reRender="total-amount-expenses" />
					<rich:jQuery selector="#total-amount-expenses" timing="onload"
								 query="setMask('#{bundle['jquery.monetary.pattern']}')" />
					<f:convertNumber locale="#{bundle['locale.en_us']}"
									 pattern="#{systemProperties['pattern.number']}" />
				</h:inputText>

				<h:outputText value="#{bundle['_nls.msa.documento_legal.percent_expenses.label']}*:"
							  for="total-amount-expenses" styleClass="labelGeneric"
							  rendered="#{msaController.msaContratoBean.tipoMontanteDespesaIsPercent}" />
				<h:inputText id="total-amount-expenses-percent"
							 size="50"
							 maxlength="99"
							 label="#{bundle['_nls.msa.documento_legal.percent_expenses.label']}"
							 value="#{msaController.msaContratoBean.to.porcentagemDespesa}"
							 rendered="#{msaController.msaContratoBean.tipoMontanteDespesaIsPercent}"
							 disabled="#{msaController.msaContratoBean.isITSupport}">
					<a4j:support event="onchange" limitToList="true"
								 reRender="total-amount-expenses-percent" />
					<rich:jQuery selector="#total-amount-expenses-percent" timing="onload"
								 query="setMask('#{bundle['jquery.percent.pattern']}')" />
					<f:convertNumber locale="#{bundle['locale.en_us']}"
									 pattern="#{systemProperties['pattern.number']}" />
				</h:inputText>
				<h:panelGrid columns="2">
					<h:outputText value="#{bundle['_nls.msa.documento_legal.status.label']}:*" for="status" styleClass="labelGeneric" />
					<rich:toolTip for="helpLinkStatusMSA" value="#{bundle['_nls.msa.documento_legal.status.tooltip.link']}"/>
					<rich:comboBox id="status"
								   label="#{bundle['_nls.msa.documento_legal.status.label']}"
								   suggestionValues="#{msaController.msaContratoBean.statusContratosList}"
								   value="#{msaController.msaContratoBean.statusContratoSelected}"
								   defaultLabel="#{empty msaController.msaContratoBean.statusContratosList ? bundle['_nls.msa.documento_legal.msg.warning.no_type'] : bundle['_nls.msa.documento_legal.status.label']}"
								   enableManualInput="false"
								   disabled="#{msaController.msaContratoBean.isITSupport}">
					</rich:comboBox>
					<h:graphicImage
							id="helpLinkStatusMSA"
							value="/images/icons/info.gif"
							style="border:0;padding:5px;"/>
			    </h:panelGrid>
				<h:outputText value="#{bundle['_nls.msa.documento_legal.data_inicio.label']}:*" for="start-date" styleClass="labelGeneric" />
				<rich:calendar id="start-date"
							   value="#{msaController.msaContratoBean.to.dataInicial}"
							   locale="#{bundle['_nls.calendar.locale']}"
							   enableManualInput="true"
							   datePattern="#{bundle['_nls.date.pattern']}"
							   label="#{bundle['_nls.msa.documento_legal.data_inicio.label']}"
							   disabled="#{msaController.msaContratoBean.isITSupport}">
				</rich:calendar>

				<h:outputText value="#{bundle['_nls.msa.documento_legal.data_fim.label']}:*" for="end-date" styleClass="labelGeneric" />
				<h:panelGrid columns="2">
					<h:selectBooleanCheckbox id="endDateIndeterminate"
											 styleClass="noMargin"
											 value="#{msaController.msaContratoBean.to.dataIndeterminada}"
											 disabled="#{msaController.msaContratoBean.isITSupport}">
						<a4j:support event="onchange" limitToList="true"
									 reRender="msa-contrato-form" action="#{msaController.clearValues}" />
					</h:selectBooleanCheckbox>
					<h:outputText value="#{bundle['_nls_msa.documento_legal.indeterminate']}" />
				</h:panelGrid>

				<rich:calendar id="end-date"
							   value="#{msaController.msaContratoBean.to.dataFinal}"
							   locale="#{bundle['_nls.calendar.locale']}"
							   enableManualInput="true"
							   datePattern="#{bundle['_nls.date.pattern']}"
							   label="#{bundle['_nls.my_profile.delegate.data_fim.label']}"
							   disabled="#{msaController.msaContratoBean.isITSupport or msaController.msaContratoBean.to.dataIndeterminada}">
				</rich:calendar>
			</h:panelGrid>

			<h:panelGrid>
				<h:outputText value="#{bundle['_nls.msa.documento_legal.service_type.label']}:*" for="service-type" styleClass="labelGeneric" />
				<h:selectManyCheckbox styleClass="listChecks"
									  id="service-type"
									  label="#{bundle['_nls.msa.documento_legal.service_type.label']}"
									  value="#{msaController.msaContratoBean.serviceTypesDocumentoLegalSelected}"
									  disabled="#{msaController.msaContratoBean.isITSupport}">
					<f:selectItems value="#{msaController.msaContratoBean.mapServiceTypeDocumentoLegal}" />
				</h:selectManyCheckbox>
				<script type="text\javascript">
					var item = [];
					item = "#{msaController.msaContratoBean.tipoServicoDescription}".replace('[','').replace(']','').split(',');
					var columns = document.getElementsByClassName("listChecks")[0].childElements()[0].childElements()[0].childElements();
					for (var i = 0; i &lt; columns.length; i++) {
						columns[i].title = item[i];
					}
			 	</script>
			</h:panelGrid>

			<h:panelGrid>
				<h:outputText value="#{bundle['_nls.msa.documento_legal.bases.label']}:*" for="bases" styleClass="labelGeneric" />
				<h:selectManyCheckbox styleClass="listChecks"
									  id="bases"
									  label="#{bundle['_nls.msa.documento_legal.bases.label']}"
									  value="#{msaController.msaContratoBean.basesDocumentoLegalSelected}"
									  disabled="#{msaController.msaContratoBean.isITSupport}">
					<f:selectItems value="#{msaController.msaContratoBean.mapBasesDocumentoLegal}"/>
				</h:selectManyCheckbox>

				<h:outputText value="#{bundle['_nls.msa.documento_legal.notes.label']}:" for="notes" styleClass="labelGeneric" />
				<h:inputTextarea id="notes"
								 row="10"
								 col="60"
								 maxlength="250"
								 label="Note"
								 value="#{msaController.msaContratoBean.to.comentarios}"
								 disabled="#{msaController.msaContratoBean.isITSupport}">
					<f:validateLength minimum="1" maximum="700" />
				</h:inputTextarea>
			</h:panelGrid>

			<h:panelGrid styleClass="table" headerClass="header">
				<a4j:loadScript src="/js/jquery.numeric.js" />
				<a4j:loadScript src="/js/jquery.alphanumeric.js" />
				<a4j:loadScript src="/js/jquery.meio.mask.js" />
				<h:panelGrid columns="5">
					<h:panelGrid>
						<h:outputText value="#{bundle['_nls_msa.documento_legal.add_cnpj.label']}:"
									  for="msaContratoCnpj" styleClass="labelGeneric" />
					</h:panelGrid>
					<h:panelGrid>
						<h:inputText id="msaContratoCnpj" size="30" maxlength="49"
									 label="#{bundle['_nls_msa.documento_legal.add_cnpj.label']}"
									 value="#{msaController.msaContratoCnpjBean.to.msaContratoCnpj}"
									 disabled="#{msaController.msaContratoBean.isITSupport}">
							<rich:jQuery selector="#msaContratoCnpj" query="setMask('cnpj')" timing="immediate" />
							<f:validateLength
									minimum="#{systemProperties['form.input.length.minimum']}"
									maximum="49" />
						</h:inputText>
					</h:panelGrid>
					<h:panelGrid>
						<sec:ifAnyGranted roles="BUS.MSA:ED,BUS.MSA:CR">
							<a4j:commandButton value="#{bundle['_nls.button.add']}" styleClass="buttonGeneric"
											   action="#{msaController.addMsaContratoCnpj}"/>
						</sec:ifAnyGranted>
					</h:panelGrid>
				</h:panelGrid>
				<h:form>
					<div style="height: 135px; overflow: auto;">
						<rich:dataTable width="100%" id="lista" var="document" value="#{msaController.msaContratoBean.cnpjList}">
							<rich:column style="width:150px; text-align:center;">
								<f:facet name="header">
									<h:outputText
											value="#{bundle['_nls_msa.documento_legal.add_cnpj.label']}" />
								</f:facet>
								<h:outputText value="#{document.msaContratoCnpj}" />
							</rich:column>

							<rich:column style="text-align: center;">
								<f:facet name="header">
									<h:outputText
											value="#{bundle['_nls.travel.budget.label.actions']}" />
								</f:facet>

								<!-- Botao de delete -->
								<sec:ifAnyGranted roles="BUS.MSA:ED,BUS.MSA:DE">
									<a4j:commandLink id="deleteLink"
													 oncomplete="#{rich:component('deleteCnpj')}.show()">
										<h:graphicImage value="/images/icons/delete.gif" style="border:0" />
										<f:setPropertyActionListener value="#{document}"
																	 target="#{msaController.msaContratoBean.msaContratoCnpjToDelete}" />
									</a4j:commandLink>
									<rich:toolTip for="deleteLink"
												  value="#{bundle['_nls.hint.delete']}" />
								</sec:ifAnyGranted>
							</rich:column>

							<f:facet name="footer">
								<h:outputText value="No Cnpj added"
											  rendered="#{empty msaController.msaContratoBean.cnpjList}"
											  style="font-style: italic;" />
							</f:facet>

						</rich:dataTable>
					</div>

				</h:form>
				<!-- Modal do delete -->
				<rich:modalPanel id="deleteCnpj" autosized="true" width="200">
					<f:facet name="header">
						<h:outputText value="#{bundle['_nls.title.confirmation']}"
									  style="padding-right:15px;" />
					</f:facet>
					<f:facet name="controls">
						<h:panelGroup>
							<h:graphicImage value="/images/icons/close.gif"
											styleClass="hidelink" id="hidelinkDeleteCnpj" />
							<rich:componentControl for="deleteCnpj"
												   attachTo="hidelinkDeleteCnpj" operation="hide" event="onclick" />
						</h:panelGroup>
					</f:facet>

					<h:outputText
							value="#{bundle['_nls_msa.documento_legal.msgm.delete.cnpj']}"
							style="padding-right:15px;" />

					<h:form>
						<rich:spacer height="5" />
						<table width="100%">
							<tbody>
							<tr>
								<sec:ifAnyGranted roles="BUS.MSA:ED,BUS.MSA:DE">
									<td align="center" width="50%"><a4j:commandButton
											value="#{bundle['_nls.button.ok']}" ajaxSingle="true"
											action="#{msaController.removeCnpj}"
											oncomplete="#{rich:component('deleteCnpj')}.hide();"
											styleClass="buttonGeneric" /></td>
									<td align="center" width="50%"><a4j:commandButton
											value="#{bundle['_nls.button.cancel']}"
											styleClass="buttonGeneric"
											action="#{msaController.prepareCnpjList}"
											oncomplete="#{rich:component('deleteCnpj')}.hide();return false;" />
									</td>
								</sec:ifAnyGranted>
							</tr>
							</tbody>
						</table>
					</h:form>
				</rich:modalPanel>
			</h:panelGrid>

		</h:panelGrid>

	</h:panelGrid>
	<rich:spacer height="10" />
</ui:composition>

</html>
